#
# A minimal custom values file for the Curity Identity Server, for an Istio deployment
#

replicaCount: 2

image:
  repository: custom_idsvr
  tag: latest

curity:
  admin:
    podLabels:
      sidecar.istio.io/inject: 'true'
    logging:
      level: INFO
    extraEnv:
    - name: LICENSE_KEY
      value: $LICENSE_KEY

  runtime:
    podLabels:
      sidecar.istio.io/inject: 'true'
    serviceAccount:
      name: curity-idsvr-service-account
    logging:
      level: INFO
    extraEnv:
    - name: LICENSE_KEY
      value: $LICENSE_KEY

  config:
    uiEnabled: true
    skipInstall: true
    backup: false
    encryptionKey: $CONFIG_ENCRYPTION_KEY
    configuration:
      - configMapRef:
          name: idsvr-configbackup
          items:
            - key: configbackup
              path: idsvr-config-backup.xml
    environmentVariableSecrets:
      - idsvr-secure-properties

# Custom resource definitions for Istio's gateway expose the Curity Identity Server over port 443
ingress:
  enabled: false
